#!/bin/sh
set -eu

# Enable screen blanking / monitor power-off after 10 minutes
xset s on         # Ensure screensaver is enabled
xset s 600        # Set screensaver timeout to 10 minutes
xset +dpms        # Enable DPMS
xset dpms 0 0 600 # Turn off display after 10 minutes (standby 0, suspend 0, off 600)

# Load X resources for larger fonts (for children)
[ -f ~/.Xresources ] && xrdb -merge ~/.Xresources

# Hide cursor after a few seconds
unclutter -idle 3 &

# Minimal window manager (no taskbar/panel)
matchbox-window-manager -use_titlebar no -use_lowlight -use_fullscreen &

xbindkeys &

# Run selected app (from run-x.sh)
if [ -n "${KID_APP:-}" ]; then
  # shellcheck disable=SC2086
  exec "$KID_APP" ${KID_ARGS:-}
fi

# Fallback
exec xterm
